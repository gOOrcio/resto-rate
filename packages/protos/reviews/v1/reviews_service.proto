syntax = "proto3";

package reviews.v1;

import "reviews/v1/review.proto";
import "reviews/v1/tag.proto";

option go_package = "api/src/generated/reviews/v1";

service ReviewsService {
  rpc CreateReview(CreateReviewRequest) returns (CreateReviewResponse);
  rpc GetReview(GetReviewRequest) returns (GetReviewResponse);
  rpc UpdateReview(UpdateReviewRequest) returns (UpdateReviewResponse);
  rpc DeleteReview(DeleteReviewRequest) returns (DeleteReviewResponse);
  rpc ListReviews(ListReviewsRequest) returns (ListReviewsResponse);
  rpc AddTag(AddTagRequest) returns (AddTagResponse);
  rpc RemoveTag(RemoveTagRequest) returns (RemoveTagResponse);
  rpc ListTags(ListTagsRequest) returns (ListTagsResponse);
}

message CreateReviewRequest {
  string restaurant_id = 1;
  string user_id = 2;
  string comment = 3;
  double rating = 4;
  repeated TagProto tags = 5;
}

message CreateReviewResponse {
  string id = 1;
  string restaurant_id = 2;
  string user_id = 3;
  string comment = 4;
  double rating = 5;
}

message GetReviewRequest {
  string restaurant_id = 2;
  string user_id = 3;
}

message GetReviewResponse {
  string id = 1;
  string restaurant_id = 2;
  string user_id = 3;
  string comment = 4;
  double rating = 5;
  repeated TagProto tags = 6;
}

message UpdateReviewRequest {
  string id = 1;
  string restaurant_id = 2;
  string user_id = 3;
  string comment = 4;
  double rating = 5;
  repeated TagProto tags = 6;
}

message UpdateReviewResponse {
  string id = 1;
  string restaurant_id = 2;
  string user_id = 3;
  string comment = 4;
  double rating = 5;
  repeated TagProto tags = 6;
}

message DeleteReviewRequest {
  string id = 1;
}

message DeleteReviewResponse {
  string id = 1;
}

message ListReviewsRequest {
  string restaurant_id = 1;
  string user_id = 2;
  string comment = 3;
  double rating = 4;
}

message ListReviewsResponse {
  repeated ReviewProto reviews = 1;
} 

message AddTagRequest {
  string review_id = 1;
  string tag_id = 2;
}

message AddTagResponse {
  string review_id = 1;
  string tag_id = 2;
}

message RemoveTagRequest {
  string review_id = 1;
  string tag_id = 2;
}

message RemoveTagResponse {
  string review_id = 1;
  string tag_id = 2;
}

message ListTagsRequest {
  string review_id = 1;
}

message ListTagsResponse {
  repeated TagProto tags = 1;
}